# Json structure (version 0.4.1-beta)
Please refer to the [README.md](https://github.com/deepnight/led/blob/master/README.md) for more informations.
   - [Json root](#led-ProjectJson)
   - [Level](#led-LevelJson)
     - [Layer instance](#led-LayerInstanceJson)
       - [Tile instance](#led-Tile)
       - [Entity instance](#led-EntityInstanceJson)
       - [Field instance](#led-FieldInstanceJson)
   - [Definitions](#led-DefinitionsJson)
     - [Layer definition](#led-LayerDefJson)
     - [Entity definition](#led-EntityDefJson)
       - [Field definition](#led-FieldDefJson)
     - [Tileset definition](#led-TilesetDefJson)
     - [Enum definition](#led-EnumDefJson)

<a id="led-ProjectJson" name="led-ProjectJson"></a>
## Json root   
Value | Type | Description
-- | -- | --
`bgColor` | String | Project background color
`defaultGridSize` | Int | Default grid size for new layers
`defaultPivotX` | Float | Default X pivot (0 to 1) for new entities
`defaultPivotY` | Float | Default Y pivot (0 to 1) for new entities
`defs` | [Definitions](#led-DefinitionsJson) | A structure containing all the definitions of this project
`exportTiled` | Bool | If TRUE, a Tiled compatible file will also be generated along with the LEd JSON file.
`jsonVersion` | String | File format version
`levels` | Array&nbsp;of&nbsp;[Level](#led-LevelJson) | 
`minifyJson` | Bool | If TRUE, the Json is partially minified (no indentation, nor line breaks)

<a id="led-LevelJson" name="led-LevelJson"></a>
## 1. Level   
Value | Type | Description
-- | -- | --
`identifier` | String | Unique String identifier
`layerInstances` | Array&nbsp;of&nbsp;[Layer&nbsp;instance](#led-LayerInstanceJson) | 
`pxHei` | Int | Height of the level in pixels
`pxWid` | Int | Width of the level in pixels
`uid` | Int | Unique Int identifier

<a id="led-LayerInstanceJson" name="led-LayerInstanceJson"></a>
## 1.1. Layer instance   
Value | Type | Description
-- | -- | --
`__cHei` | Int | Grid-based height
`__cWid` | Int | Grid-based width
`__gridSize` | Int | Grid size
`__identifier` | String | Unique String identifier
`__opacity`<br/> [![Generic badge](https://img.shields.io/badge/Added-0.4.0-green.svg)](JSON_CHANGELOG.md)  | Float | Layer opacity as Float [0-1]
`__type` | String | Layer type (possible values: IntGrid, Entities, Tiles or AutoLayer)
`autoLayerTiles`<br/><sup>Only *Auto-layers*</sup><br/> [![Generic badge](https://img.shields.io/badge/Added-0.4.0-green.svg)](JSON_CHANGELOG.md)  | Array&nbsp;of&nbsp;[Tile&nbsp;instance](#led-Tile) | An array containing all tiles generated by Auto-layer rules. The array is already sorted in display order (ie. 1st tile is beneath 2nd, which is beneath 3rd etc.)
`entityInstances`<br/><sup>Only *Entity layers*</sup> | Array&nbsp;of&nbsp;[Entity&nbsp;instance](#led-EntityInstanceJson) | 
`gridTiles`<br/><sup>Only *Tile layers*</sup> | Array&nbsp;of&nbsp;[Tile&nbsp;instance](#led-Tile) | 
`intGrid`<br/><sup>Only *IntGrid layers*</sup> | Array&nbsp;of&nbsp;Object | This object contains the following fields:<br/><ul><li>**`coordId`** **(Int**) : *Coordinate ID in the layer grid*</li><li>**`v`** **(Int**) : *IntGrid value*</li></ul>
`layerDefUid` | Int | Reference the Layer definition UID
`levelId` | Int | Reference to the UID of the level containing this layer instance
`pxOffsetX` | Int | Horizontal offset in pixels to render this layer, usually 0
`pxOffsetY` | Int | Vertical offset in pixels to render this layer, usually 0
`seed`<br/><sup>Only *Auto-layers*</sup> | Int | Random seed used for Auto-Layers rendering

<a id="led-Tile" name="led-Tile"></a>
## 1.1.1. Tile instance  [![Generic badge](https://img.shields.io/badge/Added-0.4.0-green.svg)](JSON_CHANGELOG.md) 
Value | Type | Description
-- | -- | --
`d` | Array&nbsp;of&nbsp;Int | Internal data used by the editor.<br/>		For auto-layer tiles: `[ruleId, coordId, tileId]`.<br/>		For tile-layer tiles: `[coordId, tileId]`.
`f` | Int | "Flip flags", a 2-bits integer to represent the mirror transformations of the tile.<br/>		 - Bit 0 = X flip<br/>		 - Bit 1 = Y flip<br/>		 Examples: f=0 (no flip), f=1 (X flip only), f=2 (Y flip only), f=3 (both flips)
`px` | Array&nbsp;of&nbsp;Int | Pixel coordinates of the tile in the **layer** (`[x,y]` format)
`src` | Array&nbsp;of&nbsp;Int | Pixel coordinates of the tile in the **tileset** (`[x,y]` format)

<a id="led-EntityInstanceJson" name="led-EntityInstanceJson"></a>
## 1.1.2. Entity instance   
Value | Type | Description
-- | -- | --
`__grid`<br/> [![Generic badge](https://img.shields.io/badge/Changed-0.4.0-green.svg)](JSON_CHANGELOG.md)  | Array&nbsp;of&nbsp;Int | Grid-based coordinates (`[x,y]` format)
`__identifier` | String | Unique String identifier
`__tile`<br/> [![Generic badge](https://img.shields.io/badge/Added-0.4.0-green.svg)](JSON_CHANGELOG.md)  | Object&nbsp;*(can&nbsp;be&nbsp;`null`)* | Optional Tile used to display this entity (it could either be the default Entity tile, or some tile provided by a field value, like an Enum).<br/>This object contains the following fields:<br/><ul><li>**`srcRect`** **(Array of Int**) : *An array of 4 Int values that refers to the tile in the tileset image: `[ x, y, width, height ]`*</li><li>**`tilesetUid`** **(Int**) : *Tileset ID*</li></ul>
`defUid` | Int | Reference of the **Entity definition** UID
`fieldInstances` | Array&nbsp;of&nbsp;[Field&nbsp;instance](#led-FieldInstanceJson) | 
`px`<br/> [![Generic badge](https://img.shields.io/badge/Changed-0.4.0-green.svg)](JSON_CHANGELOG.md)  | Array&nbsp;of&nbsp;Int | Pixel coordinates (`[x,y]` format)

<a id="led-FieldInstanceJson" name="led-FieldInstanceJson"></a>
## 1.1.3. Field instance   
Value | Type | Description
-- | -- | --
`__identifier` | String | Unique String identifier
`__type` | String | Type of the field, such as Int, Float, Enum(enum_name), Bool, etc.
`__value` | Dynamic&nbsp;(anything) | Actual value of the field instance. The value type may vary, depending on `__type` (Integer, Boolean, String etc.)<br/>		It can also be an `Array` of various types.
`defUid` | Int | Reference of the **Field definition** UID

<a id="led-DefinitionsJson" name="led-DefinitionsJson"></a>
## 2. Definitions   
Value | Type | Description
-- | -- | --
`entities` | Array&nbsp;of&nbsp;[Entity&nbsp;definition](#led-EntityDefJson) | 
`enums` | Array&nbsp;of&nbsp;[Enum&nbsp;definition](#led-EnumDefJson) | 
`externalEnums` | Array&nbsp;of&nbsp;[Enum&nbsp;definition](#led-EnumDefJson) | Note: external enums are exactly the same as `enums`, except they<br/>		have a `relPath` to point to an external source file.
`layers` | Array&nbsp;of&nbsp;[Layer&nbsp;definition](#led-LayerDefJson) | 
`tilesets` | Array&nbsp;of&nbsp;[Tileset&nbsp;definition](#led-TilesetDefJson) | 

<a id="led-LayerDefJson" name="led-LayerDefJson"></a>
## 2.1. Layer definition   
Value | Type | Description
-- | -- | --
`__type` | String | Type of the layer (*IntGrid, Entities, Tiles or AutoLayer*)
`autoRuleGroups`<br/><sup>Only *Auto-layers*</sup> | Array&nbsp;of&nbsp;Object | Contains all the auto-layer rule definitions.<br/>This object contains the following fields:<br/><ul><li>**`active`** **(Bool**)</li><li>**`collapsed`** **(Bool**)</li><li>**`name`** **(String**)</li><li>**`rules`** **(Array of Dynamic (anything)**)</li><li>**`uid`** **(Int**)</li></ul>
`autoSourceLayerDefUid`<br/><sup>Only *Auto-layers*</sup> | Int | 
`autoTilesetDefUid`<br/><sup>Only *Auto-layers*</sup> | Int | Reference to the Tileset UID being used by this auto-layer rules
`displayOpacity` | Float | Opacity of the layer (0 to 1.0)
`gridSize` | Int | 
`identifier` | String | Unique String identifier
`intGridValues`<br/><sup>Only *IntGrid layer*</sup> | Array&nbsp;of&nbsp;Object | This object contains the following fields:<br/><ul><li>**`color`** **(String**) *Hex color "#rrggbb"*</li><li>**`identifier`** **(String**)</li></ul>
`tilePivotX`<br/><sup>Only *Tile layers*</sup> | Float | If the tiles are smaller or larger than the layer grid, the pivot value will be used to position the tile relatively its grid cell.
`tilePivotY`<br/><sup>Only *Tile layers*</sup> | Float | If the tiles are smaller or larger than the layer grid, the pivot value will be used to position the tile relatively its grid cell.
`tilesetDefUid`<br/><sup>Only *Tile layers*</sup> | Int | Reference to the Tileset UID being used by this tile layer
`uid` | Int | Unique Int identifier

<a id="led-EntityDefJson" name="led-EntityDefJson"></a>
## 2.2. Entity definition   
Value | Type | Description
-- | -- | --
`color` | String | Base entity color
`fieldDefs` | Array&nbsp;of&nbsp;[Field&nbsp;definition](#led-FieldDefJson) | Array of field definitions
`height` | Int | Pixel height
`identifier` | String | Unique String identifier
`maxPerLevel` | Int | Max instances per level
`pivotX` | Float | Pivot X coordinate (from 0 to 1.0)
`pivotY` | Float | Pivot Y coordinate (from 0 to 1.0)
`tileId` | Int | Tile ID used for optional tile display
`tilesetId` | Int | Tileset ID used for optional tile display
`uid` | Int | Unique Int identifier
`width` | Int | Pixel width

<a id="led-FieldDefJson" name="led-FieldDefJson"></a>
## 2.2.1. Field definition   
Sorry this type has no documentation yet.

<a id="led-TilesetDefJson" name="led-TilesetDefJson"></a>
## 2.3. Tileset definition   
Value | Type | Description
-- | -- | --
`identifier` | String | Unique String identifier
`padding` | Int | Distance in pixels from image borders
`pxHei` | Int | Image width in pixels
`pxWid` | Int | Image width in pixels
`relPath` | String | Path to the source file, relative to the current project JSON file
`spacing` | Int | Space in pixels between all tiles
`tileGridSize` | Int | 
`uid` | Int | Unique Intidentifier

<a id="led-EnumDefJson" name="led-EnumDefJson"></a>
## 2.4. Enum definition   
Value | Type | Description
-- | -- | --
`externalRelPath` | String&nbsp;*(can&nbsp;be&nbsp;`null`)* | Relative path to the external file providing this Enum
`iconTilesetUid` | Int&nbsp;*(can&nbsp;be&nbsp;`null`)* | Tileset UID if provided
`identifier` | String | Unique String identifier
`uid` | Int | Unique Int identifier
`values` | Array&nbsp;of&nbsp;Object | All possible enum values, with their optional Tile infos.<br/>This object contains the following fields:<br/><ul><li>**`__tileSrcRect`** **(Array of Int**)  [![Generic badge](https://img.shields.io/badge/Added-0.4.0-green.svg)](JSON_CHANGELOG.md)  : *An array of 4 Int values that refers to the tile in the tileset image: `[ x, y, width, height ]`*</li><li>**`id`** **(String**) : *Enum value*</li><li>**`tileId`** **(Int *(can be `null`)***) : *The optional ID of the tile*</li></ul>