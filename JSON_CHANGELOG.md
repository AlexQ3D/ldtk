Please always refer to the [JSON_DOC.md](JSON_DOC.md) file for automatically updated Json format description (including version related changes).

# 0.6.0-beta

 - Added `worldLayout` to **Project root**
 - Added `worldGridWidth`/`worldGridHeight` to **Project root**
 - Added `worldX/worldY` to **Level Instance**
 - Added `t` (tile ID) to **Tile Instance**
 - Added `averageColors` to **Tileset definition**
 - Added `__tilesetDefUid` and`__tilesetRelPath` to **Layer instance**
 - Added `defaultLevelBgColor` to **Project root**
 - Added optional `bgColor` to **Level instance** (if value is `null`, the project `defaultLevelBgColor` should be used instead).
 - Added optional `__bgColor` to **Level instance** (same as `bgColor`, except the default project value is automatically used here if its value is `null`).

# 0.5.0-beta

 - The pixel coordinates of AutoLayer tiles no longer include the layer `pxOffsetX/Y` values. They should be added manually on display.
 - In auto-layers, all tiles that are hidden (ie. behind an opaque tile) are discarded from the `autoLayerTiles` array.

# 0.4.0-beta

The JSON format was optimized to reduce its size (should be approximately 40-50% smaller). See changes below, or check the [JSON_DOC.md](JSON_DOC.md).

## Auto-layer tiles

 - Removed `layerInstance.autoTiles`
 - Added `layerInstance.autoLayerTiles` which is a more compact version of the tiles data generated by Auto-layer rules. It contains the following fields:
   - `px: [x,y]`: an array of 2 values representing the **level** [x,y] pixel coordinates of the tile.
   - `src: [x,y]`: an array of 2 values representing the **tileset** [x,y] pixel coordinates of the tile.
   - `f`: a 2-bits integer to represent the mirror transformations of the tile: Bit 0 = X flip, Bit 1 = Y flip
   - `d`: this field contains internal data used by the Editor.

## Entity instances

- Removed `entityInstance.x/y`
- Removed `entityInstance.__cx/__cy`
- Added `entityInstance.px`: an array of 2 values representing [x,y] pixel coordinates of the entity.
- Added `entityInstance.__grid`: an array of 2 values representing [cx,cy] grid-based coordinates of the entity.

## Tile layers

 - The format of *tile-layer* tiles was unified with *auto-layer* tiles.
 - `layerInstance.gridTiles` is now an array of:
   - `px: [x,y]`: an array of 2 values representing the **level** [x,y] pixel coordinates of the tile.
   - `src: [x,y]`: an array of 2 values representing the **tileset** [x,y] pixel coordinates of the tile.
   - `f`: a 2-bits integer to represent the mirror transformations of the tile: Bit 0 = X flip, Bit 1 = Y flip
   - `d`: this field contains internal data used by the Editor.

# 0.3.1-beta

 - Added `__cx`/`__cy` to `layerInstance.autoTiles.results`

# 0.3.0-beta

**BREAKING CHANGE**: some cleanup & renaming happened on this update, please check changes below.

## Tiles layer

 - `__tileX` / `__tileY` were renamed to `__srcX` / `__srcY` in `layerInstances.gridTiles`. These values are **pixel coordinates of the tile in the tileset atlas image**.
 - added `__x` / `__y` values, which are **pixel display coordinates of each tile**.

## Auto-tile layers
 To support new rule-based group of tiles (eg. "*placing a big object using just rules*"), some changes were introduced to the `layerInstances.autoLayers` structure (see example below):
   - Renamed `tiles` to `results`.
   - Replaced `tileId` from `layerInstances.autoTiles` with an array called `tiles`.
   - Renamed `__tileX` and `__tileY` in these sections with hopefully clearer names `__srcX` and `__srcY`. These are still X/Y pixel coordinates of corresponding tiles in the tileset image.
   - Added `_x` and `_y` which are pre-computed pixel coordinates of tile on screen
   - Please refer to updated doc for more infos: https://deepnight.net/docs/led/json/

Before, in layerInstances:
```json
"autoTiles": [
	{
		"ruleId": 101,
		"tiles": [ {
			"coordId": 90,
			"tileId": 169,
			"__tileX": 32,
			"__tileY": 128,
			"flips": 0
		} ]
	}
]
```

Now:
```json
"autoTiles": [
	{
		"ruleId": 101,
		"results": [ {    // <--- Renamed!
			"coordId": 90,
			"tiles": [    // <---- Now an array!
				{ "tileId": 169, "__x": 64, "__y": 8, "__srcX": 8, "__srcY": 112 },
				{ "tileId": 181, "__x": 64, "__y": 16, "__srcX": 8, "__srcY": 120 }
			],
			"flips": 0
		} ]
	}
]
```

# 0.2.1-beta

 - Added `__tileX` / `__tileY` to `layerInstances.autoTiles`
 - Added `__tileX` / `__tileY` to `layerInstances.gridTiles`
 - Renamed `v` to `tileId` in `layerInstances.gridTiles`
 - Renamed `tileSpacing` -> `spacing` in `tilesets` definitions
 - Added `padding` to `tilesets` definitions

# 0.2.0-beta

 Initial beta release